<progress-bar>

    <div id="line-container">
        <div id="line"></div>
    </div>

    <style>
        #line-container {
            height: 4px;
            width: 100%;
            margin: auto;
            margin-top: 1em;
            max-width: 1000px;
            min-width: 800px;
            background-color: #000;
        }
        
        #line {
            height: 100%;
            width: 100%;
            background-color: #f00;
        }
    </style>

    <script>
        var self = this;

        self.on('mount', function() {
            self.updateLine(self.opts.duration * 1000);
        });

        self.on('update', function() {});

        updateLine(duration) {
            // todo: fire a 'started' event 
            // todo: fire a 'progressed' event 
            // todo: fire a 'completed' event 

            var endMillis = new Date().getTime() + parseInt(duration);
            var millisRightNow = null;
            var interval = setInterval(function() {
                millisRightNow = new Date().getTime();
                if (endMillis >= millisRightNow) {
                    var width = ((endMillis - millisRightNow) / duration) * 100;
                    console.log(Math.floor(width));
                    $('#line').css('width', width + '%');
                } else {
                    console.log('done');
                    console.log(millisRightNow);
                    clearInterval(interval);
                }
            }, self.opts.speed || 50);
        }
    </script>

</progress-bar>