<app>
    <chord-category-selector doselect={chordSetSelected} doplay={playChords}/>
    <progress-bar duration='7' start={doProgressStart} end={doProgressEnd} progress={doProgress}></progress-bar>
    <guitar model={opts} chordfamilychanged={chordFamilyChanged}></guitar>

    <chords-menu-w-progress></chords-menu-w-progress>

    <!--<chords-menu doselect={chordSelected} model={opts}></chords-menu>-->

    <style>

    </style>
    <script>
        var self = this;
        var guitarTag = null;
        var chordsMenu = null;
        var currentChordCategory = null;

        self.on('mount', function(e) {
            guitarTag = self.tags['guitar'];
            chordsMenu = self.tags['chords-menu'];
        });

        doProgressStart() {
            console.log('started!!');
        }

        doProgressEnd() {
            console.log('ended!!');
        }

        doProgress() {
            console.log('progress!!');
        }

        showTuner() {}

        self.on('update', function(e) {});

        chordSetSelected(category) {
            chordsMenu.renderMenuItems(category);
            currentChordCategory = category;
        }

        chordSelected(chord) {
            self.drawChord(chord);
        }

        drawChord(chord) {
            guitarTag.drawChord(chord);
        }

        chordCategoryChanged(category) {
            console.log('chordfamilychanged: ' + category);
            currentChordCategory = category;
        }

        playChords() {
            if (currentChordCategory) {
                var chordCategory = self.opts.getChordsByCategory(currentChordCategory);
                guitarTag.guitar.playChordCategory(chordCategory);
            } else {
                console.log('currentChordCategory is null');
                // todo: logic for this case
                // set a default, pop up a warning etc
            }
        }

        removeChordEls() {
            guitar.removeChordEls();
        }

        slideFretboard() {
            guitar.slide();
        }
    </script>
</app>