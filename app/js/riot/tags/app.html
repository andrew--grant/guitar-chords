<app>
    <chord-category-selector doselect={chordSetSelected} doplay={playChords}/>
    <guitar model={opts} chordfamilychanged={chordFamilyChanged}></guitar>
    <chords-menu-w-progress model={opts} doselect={chordSelected}></chords-menu-w-progress>
    <style></style>
    <script>
        var self = this;
        var guitarTag = null;
        var chordsMenu = null;
        var currentChordCategory = null;

        self.on('mount', function(e) {
            guitarTag = self.tags['guitar'];
            chordsMenu = self.tags['chords-menu-w-progress'];
        });

        showTuner() {}

        self.on('update', function(e) {});

        chordSetSelected(category) {
            chordsMenu.renderMenuItems(category);
            currentChordCategory = category;
        }

        chordSelected(chord) {
            guitarTag.drawChord(chord, 'zzz');
        }

        chordCategoryChanged(category) {
            // todo: remove this function, appears to be unused
            console.log('chordfamilychanged: ' + category);
            currentChordCategory = category;
        }

        playChords() {
            if (currentChordCategory) {
                console.log();
                var pbArr = self.tags['chords-menu-w-progress'].tags['progress-bar'];
                var chordCategory = self.opts.getChordsByCategory(currentChordCategory);
                guitarTag.guitar.playChordCategory(chordCategory, pbArr);
            } else {
                console.log('currentChordCategory is null');
                // todo: logic for this cases
            }
        }

        removeChordEls() {
            guitar.removeChordEls();
        }

        slideFretboard() {
            guitar.slide();
        }
    </script>
</app>